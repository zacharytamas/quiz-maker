<link rel="import" href="../polymer/polymer.html">

<!--
An element which accepts a Quiz description via its `quiz` property or by
declaratively describing one directly inside it when declaring it in
your application.

@element quiz-maker
@demo demo/index.html
-->
<dom-module id="quiz-maker">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'quiz-maker',

    properties: {
      quiz: {
        type: Object
      }
    },

    attached: function() {
      if (!this.quiz) {
        this.quiz = this._introspect();
      }
    },

    /**
     * Introspects the element's Light DOM for a Quiz defined declaratively,
     * compiles a QuizData object and returns it.
     */
    _introspect: function() {
      var quiz = {};
      var root = Polymer.dom(this);

      // First, try to acertain the title.
      var title = root.querySelector('qz-title');
      if (title) {
        quiz.title = title.innerText;
      }

      var questions = root.querySelector('qz-questions');
      if (questions) {
        quiz.questions = questions._introspect();
      }

      return quiz;
    }
  });
</script>
